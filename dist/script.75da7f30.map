{"version":3,"sources":["script.js"],"names":["$","$tab","$section","mvNum","on","index","addClass","siblings","removeClass","eq","ajax","url","type","dataType","data","start","count","done","console","log","setData","fail","err","subjects","forEach","ele","template","$node","find","attr","images","small","text","title","rating","average","collect_count","year","genres","join","director","directors","j","push","name","casting","casts","m","append"],"mappings":"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","file":"script.75da7f30.map","sourceRoot":"..","sourcesContent":["$(function() {\n  let $tab = $('footer > .bt-tab')\n  let $section = $('main > section')\n  let mvNum = 0\n\n  $tab.on('click', function() {\n    let index = $(this).index()\n    $(this).addClass('fired').siblings().removeClass('fired')\n    $section.eq(index).addClass('fired').siblings().removeClass('fired')\n  })\n\n  $.ajax({\n    url: 'https://api.douban.com/v2/movie/top250',\n    type: 'GET',\n    dataType: 'jsonp',\n    data: {\n      start: mvNum,\n      count: 20\n    }\n  }).done(function(data) {\n\n    console.log(data)\n    setData(data)\n    \n  }).fail(function() {\n    console.log('err:' + err)\n  })\n\n  // 生成数据\n  function setData(data) {\n    mvNum += 20\n    data.subjects.forEach(ele => {\n      let template = `\n      <a href=\"#\">\n        <div class=\"cover\">\n          <img src=\"\" alt=\"\">\n        </div>\n        <div class=\"detail\">\n          <h2></h2>\n          <div class=\"extra\">\n            <span class=\"score\"></span>  / <span class=\"collect\"></span>收藏\n          </div>\n          <div class=\"extra\">\n             <span class=\"year\"> / <span class=\"genres\"></span> \n          </div>\n          <div class=\"extra\">\n            导演：<span class=\"director\"></span>\n          </div>\n          <div class=\"extra\">\n            主演：<span class=\"casting\"></span>\n          </div>\n        </div>\n      </a>\n    `\n    var $node = $(template)\n    $node.find('.cover img').attr(\"src\", ele.images.small)\n    $node.find('.detail h2').text(ele.title)\n    $node.find('.extra .score').text(ele.rating.average)\n    $node.find('.extra .collect').text(ele.collect_count)\n    $node.find('.extra .year').text(ele.year)\n    $node.find('.extra .genres').text(ele.genres.join(' / '))\n\n    $node.find('.extra .director').text(function() {\n      var director = []\n      ele.directors.forEach((j)=>{\n        director.push(j.name)\n      })\n      return director.join('、')\n    })\n    $node.find('.extra .casting').text(function() {\n      var casting = []\n      ele.casts.forEach((m)=>{\n        casting.push(m.name)\n      })\n      return casting.join('、')\n    })\n    $('section').eq(0).append($node)\n    })\n  }\n\n})"]}